[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
pythonpath = .
addopts = 
    --verbose
    --tb=short
    --strict-markers
    --disable-warnings
    --cov-fail-under=0
    --cov-report=term-missing
    --cov-report=xml
    --timeout=30
    --timeout-method=thread
    -m "not slow"
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    regression: marks tests as regression tests
    system: marks tests as system/e2e tests
timeout = 30

# Test directory structure:
# tests/
# ├── unit/           - Unit tests for individual modules
# │   ├── aroi/       - AROI validation and leaderboard tests
# │   ├── consensus/  - Consensus evaluation and authority tests
# │   ├── workers/    - API workers and cache tests
# │   ├── coordinator/- Coordinator tests
# │   ├── uptime/     - Uptime utilities tests
# │   ├── relays/     - Relay processing tests
# │   ├── templates/  - Template rendering tests
# │   └── infrastructure/ - Basic infrastructure tests
# ├── integration/    - Integration tests (may be slow)
# ├── regression/     - Regression tests for specific bugs
# ├── system/         - System/E2E tests (require network)
# └── helpers/        - Test utilities and fixtures

# Slow tests that should be excluded from regular CI:
# - integration/test_api_timeout.py - Tests timeout behavior with real servers
# - system/test_timeout_integration.py - Integration script, not pytest
# - system/test_real_api.py - Requires real network access
# - integration/test_full_workflow.py - Full e2e tests
