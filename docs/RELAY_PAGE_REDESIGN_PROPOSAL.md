# Relay Page Layout Redesign Proposals

Review of individual relay pages to better organize information, improve hierarchy, and facilitate troubleshooting for new operators.

**Constraints:**
- Keep all content the same.
- No new charts.
- Remove all emoji icons.
- Add anchor hyperlinks per important section.
- Focus on new operators and troubleshooting.

## 1. The "Status-First" Dashboard

**Philosophy:** "Is my relay working?" is the first question a user asks. This layout puts the health check front and center.

*   **Top Band (The "Vitals"):** A high-contrast status bar at the very top (full width).
    *   **Left:** Nickname & Fingerprint (Large text).
    *   **Right:** Primary Status Badge (Running / Not Running) and Consensus Status (In Consensus / Not In Consensus).
*   **Section A: Alerts & Issues (Prominent):**
    *   Dynamic section that *only* appears if there are active issues (derived from `relay.consensus_evaluation.issues`).
    *   Uses color-coded borders (Red for Error, Yellow for Warning) to list items like "Port Reachability Failed" or "Stale Descriptor" immediately below the header.
*   **Section B: 3-Column Key Metrics:**
    *   **Column 1 (Identity):** Platform, Version, Contact.
    *   **Column 2 (Connectivity):** IPv4/IPv6 Addresses, Ports, AS Number.
    *   **Column 3 (Performance):** Bandwidth (Observed vs Advertised), Uptime.
*   **Section C: Detailed Consensus Evaluation:**
    *   The detailed tables (Authority Votes, Consensus Weight) follow below.
*   **Navigation:** Anchor links in a sticky sub-header: `Jump to: Alerts | Connectivity | Performance | Consensus Votes`

## 2. The "Troubleshooter" Workflow

**Philosophy:** A linear flow designed to help an operator debug a failing relay. It orders information from "Basic Connectivity" to "Advanced Consensus logic".

*   **Header:** Standard Nickname/Fingerprint.
*   **Section A: Connectivity Check (The "Plumbing"):**
    *   Focuses on **OR Addresses** and **Dir Address**.
    *   Explicitly lists "Reachability" status for IPv4 and IPv6 (using text badges: `[Reachable]`, `[Unreachable]`) derived from the consensus data.
*   **Section B: Configuration Verification:**
    *   Displays Platform, Version (with "Recommended"/"Obsolete" text status), and Flags.
    *   This helps rule out misconfiguration (e.g., old version, wrong port).
*   **Section C: Stability & Performance:**
    *   Graphs or text blocks for Uptime (1M/6M/1Y), Bandwidth, and Flags.
    *   Includes the "Flag Eligibility" summary table here to show *why* a flag might be missing (e.g., "Need 5 more days for Guard").
*   **Section D: Authority Votes (Deep Dive):**
    *   The detailed per-authority table stays at the bottom for advanced debugging.
*   **Navigation:** Sidebar (if width permits) or top anchors: `Connectivity -> Config -> Stability -> Votes`.

## 3. The "New Operator" Checklist

**Philosophy:** Gamifies the setup process by framing relay status as a checklist of requirements to be a "Healthy Relay".

*   **Header:** Nickname.
*   **Section A: Relay Health Checklist:**
    *   A list of requirements with Check/X text markers:
        *   `[X] Reachable by Authorities` (Checks `consensus_evaluation.reachability`)
        *   `[✓] Valid Descriptor` (Checks `StaleDesc` flag)
        *   `[✓] Stable Uptime` (Checks `Stable` flag criteria)
        *   `[!] Sufficient Bandwidth` (Checks `Fast`/`Guard` thresholds)
*   **Section B: Action Items:**
    *   A dedicated box for the `advice` and `suggestions` generated by `consensus_evaluation.py`.
    *   Example: "Action Required: Upgrade Tor version," "Action Required: Check IPv6 firewall."
*   **Section C: Technical Details:**
    *   The standard "Relay Details" (Keys, Family, Policies) are placed *below* the checklist, as they are static reference data.
*   **Navigation:** Simple anchors: `Health Checklist | Action Items | Technical Details`.

## 4. The "Tabbed" Interface (CSS-Only)

**Philosophy:** Reduces cognitive load by hiding non-essential information until requested.

*   **Header:** Static header with Nickname, Fingerprint, and "Running" status.
*   **Navigation Bar (The "Tabs"):**
    *   Horizontal links styled as tabs: `Overview`, `Network Status`, `Configuration`, `Family & Policy`.
*   **Tab 1: Overview:**
    *   Summary of Bandwidth, Uptime, Country/AS, and top-level Flags.
*   **Tab 2: Network Status (The Debug Tab):**
    *   Contains the Consensus Evaluation tables, Authority Votes, and Reachability details.
*   **Tab 3: Configuration:**
    *   Platform, Version, Operating System, Ports.
*   **Tab 4: Family & Policy:**
    *   Exit Policy summaries and Family member lists.
*   **Implementation Note:** Can be done with anchor links jumping to sections, or distinct separate pages if preferred, though distinct sections on one page (with "Back to Top" links) is often easier for Ctrl+F searching.

## 5. The "Technical Spec" (High Density)

**Philosophy:** For experienced operators who want to see everything at once with minimal scrolling.

*   **Layout:** A dense 4-column grid container.
*   **Row 1 (Identity & Location):**
    *   Col 1: Fingerprint (truncated/copyable).
    *   Col 2: Contact Info.
    *   Col 3: AS / Network.
    *   Col 4: Location (Country/City).
*   **Row 2 (Status & Metrics):**
    *   Col 1: Flags (Text list).
    *   Col 2: Bandwidth (Observed/Rate/Burst).
    *   Col 3: Uptime (Current & History).
    *   Col 4: Version & Platform.
*   **Row 3 (Consensus Summary):**
    *   Full-width table showing only the "Summary: Your Relay vs Consensus" table (Table 1 from current layout).
*   **Row 4 (Deep Data):**
    *   Collapsible (or bottom-placed) sections for Exit Policy and detailed Authority Votes.
*   **Navigation:** Minimal anchors at top right.
